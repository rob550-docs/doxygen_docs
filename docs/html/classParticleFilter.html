<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MBot Software Library: ParticleFilter Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MBot Software Library
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classParticleFilter-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">ParticleFilter Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="particle__filter_8hpp_source.html">particle_filter.hpp</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ade5a43895d515483d516c6f81ce01a86"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classParticleFilter.html#ade5a43895d515483d516c6f81ce01a86">ParticleFilter</a> (int numParticles)</td></tr>
<tr class="separator:ade5a43895d515483d516c6f81ce01a86"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0bbf03c7e091566397e06be0a4882eaf"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classParticleFilter.html#a0bbf03c7e091566397e06be0a4882eaf">initializeFilterAtPose</a> (const mbot_lcm_msgs::pose2D_t &amp;pose)</td></tr>
<tr class="separator:a0bbf03c7e091566397e06be0a4882eaf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ac11e6c3d11c4ba7ed3d2b5fccffe14"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classParticleFilter.html#a4ac11e6c3d11c4ba7ed3d2b5fccffe14">initializeFilterRandomly</a> (const <a class="el" href="classOccupancyGrid.html">OccupancyGrid</a> &amp;map)</td></tr>
<tr class="separator:a4ac11e6c3d11c4ba7ed3d2b5fccffe14"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeaa858f9dbc2f07459614a556b2cb641"><td class="memItemLeft" align="right" valign="top">mbot_lcm_msgs::pose2D_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classParticleFilter.html#aeaa858f9dbc2f07459614a556b2cb641">updateFilter</a> (const mbot_lcm_msgs::pose2D_t &amp;odometry, const mbot_lcm_msgs::lidar_t &amp;laser, const <a class="el" href="classOccupancyGrid.html">OccupancyGrid</a> &amp;map)</td></tr>
<tr class="separator:aeaa858f9dbc2f07459614a556b2cb641"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a15ae3d4a8979c3acd6c4b52b06234e7b"><td class="memItemLeft" align="right" valign="top">mbot_lcm_msgs::pose2D_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classParticleFilter.html#a15ae3d4a8979c3acd6c4b52b06234e7b">updateFilterActionOnly</a> (const mbot_lcm_msgs::pose2D_t &amp;odometry)</td></tr>
<tr class="separator:a15ae3d4a8979c3acd6c4b52b06234e7b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a78e60d9cbd0b0bfbf37cc64a0fd2573c"><td class="memItemLeft" align="right" valign="top">mbot_lcm_msgs::pose2D_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classParticleFilter.html#a78e60d9cbd0b0bfbf37cc64a0fd2573c">poseEstimate</a> (void) const</td></tr>
<tr class="separator:a78e60d9cbd0b0bfbf37cc64a0fd2573c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b518da0a2db0e6e375a42476b7efd8d"><td class="memItemLeft" align="right" valign="top">mbot_lcm_msgs::particles_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classParticleFilter.html#a1b518da0a2db0e6e375a42476b7efd8d">particles</a> (void) const</td></tr>
<tr class="separator:a1b518da0a2db0e6e375a42476b7efd8d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac79f1e156ea59a4ed60a01bbdb664b4d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classParticleFilter.html#ac79f1e156ea59a4ed60a01bbdb664b4d">resetOdometry</a> (const mbot_lcm_msgs::pose2D_t &amp;odometry)</td></tr>
<tr class="separator:ac79f1e156ea59a4ed60a01bbdb664b4d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p><a class="el" href="classParticleFilter.html">ParticleFilter</a> implements a standard SIR-based particle filter. The set of particles is initialized at some pose. Then on subsequent calls to updateFilter, a new pose estimate is computed using the latest odometry and laser measurements along with the current map of the environment.</p>
<p>This implementation of the particle filter uses a fixed number of particles for each iteration. Each filter update is a simple set of operations:</p>
<p>1) Draw N particles from current set of weighted particles. 2) Sample an action from the <a class="el" href="classActionModel.html">ActionModel</a> and apply it to each of these particles. 3) Compute a weight for each particle using the <a class="el" href="classSensorModel.html">SensorModel</a>. 4) Normalize the weights. 5) Use the max-weight or mean-weight pose as the estimated pose for this update. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="ade5a43895d515483d516c6f81ce01a86"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ade5a43895d515483d516c6f81ce01a86">&#9670;&nbsp;</a></span>ParticleFilter()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ParticleFilter::ParticleFilter </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>numParticles</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Constructor for <a class="el" href="classParticleFilter.html">ParticleFilter</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">numParticles</td><td>Number of particles to use </td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd>numParticles &gt; 1 </dd></dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a0bbf03c7e091566397e06be0a4882eaf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0bbf03c7e091566397e06be0a4882eaf">&#9670;&nbsp;</a></span>initializeFilterAtPose()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ParticleFilter::initializeFilterAtPose </td>
          <td>(</td>
          <td class="paramtype">const mbot_lcm_msgs::pose2D_t &amp;&#160;</td>
          <td class="paramname"><em>pose</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>initializeFilterAtPose initializes the particle filter with the samples distributed according to the provided pose estimate.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pose</td><td>Initial pose of the robot </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a4ac11e6c3d11c4ba7ed3d2b5fccffe14"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4ac11e6c3d11c4ba7ed3d2b5fccffe14">&#9670;&nbsp;</a></span>initializeFilterRandomly()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ParticleFilter::initializeFilterRandomly </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classOccupancyGrid.html">OccupancyGrid</a> &amp;&#160;</td>
          <td class="paramname"><em>map</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a1b518da0a2db0e6e375a42476b7efd8d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1b518da0a2db0e6e375a42476b7efd8d">&#9670;&nbsp;</a></span>particles()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">mbot_lcm_msgs::particles_t ParticleFilter::particles </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>particles retrieves the posterior set of particles being used by the algorithm. </p>

</div>
</div>
<a id="a78e60d9cbd0b0bfbf37cc64a0fd2573c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a78e60d9cbd0b0bfbf37cc64a0fd2573c">&#9670;&nbsp;</a></span>poseEstimate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">mbot_lcm_msgs::pose2D_t ParticleFilter::poseEstimate </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>poseEstimate retrieves the current pose estimate computed by the filter. </p>

</div>
</div>
<a id="ac79f1e156ea59a4ed60a01bbdb664b4d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac79f1e156ea59a4ed60a01bbdb664b4d">&#9670;&nbsp;</a></span>resetOdometry()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ParticleFilter::resetOdometry </td>
          <td>(</td>
          <td class="paramtype">const mbot_lcm_msgs::pose2D_t &amp;&#160;</td>
          <td class="paramname"><em>odometry</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="aeaa858f9dbc2f07459614a556b2cb641"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeaa858f9dbc2f07459614a556b2cb641">&#9670;&nbsp;</a></span>updateFilter()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">mbot_lcm_msgs::pose2D_t ParticleFilter::updateFilter </td>
          <td>(</td>
          <td class="paramtype">const mbot_lcm_msgs::pose2D_t &amp;&#160;</td>
          <td class="paramname"><em>odometry</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const mbot_lcm_msgs::lidar_t &amp;&#160;</td>
          <td class="paramname"><em>laser</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classOccupancyGrid.html">OccupancyGrid</a> &amp;&#160;</td>
          <td class="paramname"><em>map</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>updateFilter increments the state estimated by the particle filter. The filter update uses the most recent odometry estimate and laser scan along with the occupancy grid map to estimate the new pose of the robot.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">odometry</td><td>Calculated odometry at the time of the final ray in the laser scan </td></tr>
    <tr><td class="paramname">laser</td><td>Most recent laser scan of the environment </td></tr>
    <tr><td class="paramname">map</td><td>Map built from the maximum likelihood pose estimate </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Estimated robot pose. </dd></dl>

</div>
</div>
<a id="a15ae3d4a8979c3acd6c4b52b06234e7b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a15ae3d4a8979c3acd6c4b52b06234e7b">&#9670;&nbsp;</a></span>updateFilterActionOnly()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">mbot_lcm_msgs::pose2D_t ParticleFilter::updateFilterActionOnly </td>
          <td>(</td>
          <td class="paramtype">const mbot_lcm_msgs::pose2D_t &amp;&#160;</td>
          <td class="paramname"><em>odometry</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>updateFilterActionOnly increments the state estimated by the particle filter but only applies the action model</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">odometry</td><td>Calculated odometry at the time of the final ray in the laser scan </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>odometry robot pose. </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>mbot_autonomy/include/slam/<a class="el" href="particle__filter_8hpp_source.html">particle_filter.hpp</a></li>
<li>mbot_autonomy/src/slam/<a class="el" href="particle__filter_8cpp.html">particle_filter.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
